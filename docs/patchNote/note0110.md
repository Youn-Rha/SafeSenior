# 01/10 일지
## 진행률
* 클러스터링의 한계 분석 [완료]
    * 긴 시퀸스 활용
        * 연속된 클러스터 찾기 어려운 문제점으로 긴 시퀸스 포착하여 짧은 시퀸스를 평가하는 모델 적용
    * 지도 클러스터링 학습
        * 지도 클러스터링에 필요한 툴 제작을 결정
* Visualizer 재구현 [60%]
    * plotting 버그 해결 [완료]
        * 타이머 오버플로우 버그를 확인, 통합 타이머 스케쥴러 구현으로 해결
    * 좌표계 변환 문제 해결 [완료]
        * cartesian, 5 sequence 모델로 AI 변경 및 탑재
    * 센서와 독립적인 클러스터링에 기반한 실제 좌표를 화면에 표시 [40%]
        * 실시간 구현 위한 연산 최적화 및 스레드 재설계 [80%]
        * 진동하는 위치 안정화 필요 [0%]
            * 시각적 안정성 위해 이동을 제한하는 시스템
            * 클러스터 결과와 표시되는 위치와의 차이가 존재, 해당 차이를 기록하는 시스템 구현
    * 변형된 설계에 적합한 AI 연결 설계 필요 [0%]
* global clustering 결과를 csv 파일에 반영 [완료]
    * colab이 아닌 환경에서도 구동 가능한 현태로 구현 [완료]
    * 기존 데이터 수집 프로그램에 탑재 [완료]
* Replay 기능 구현 [완료]
    * 이전 버전 : 실시간 데이터에 대한 캐싱과, 슬라이딩 통한 단방향 재생 가능
    * 현재 : global cluster로 변환된 데이터에 대한 출력 기능
    * 단축키와 클릭, 번호 입력을 통한 프레임 이동 및 클러스터 관찰 기능
    * ini 파일 사용한 UX 개선
    * 슬라이더 재생 기능 구현 완료
    * 클러스터링이 되지 않은 원형 cloud point 데이터도 리플레이 가능
* 데이터 수집기에 클러스터링 기능 추가 [완료]
    * DBSCAN과 hungarian 기반한 클러스터링을 데이터 수집 단계에서 바로 처리 가능하게 구현
    * 해당 기능에 연결된 체크박스 선택 시, 데이터 저장 과정에서 비지도 클러스터링 한 결과도 동시에 저장
* 지도 클러스터링에 필요한 labeling tool 구현 [0%]
    * 스크롤 사용한 클러스터 컬러 리스트 기능 구현
    * 클러스터 합치기 기능

## Schedule
* Visualizer
    * stateTransition() 구현, 캐시 테이블에서 가까운 요소에 자세 업데이트
    * 위치 많이 흔들리는 문제는 위치 캐싱과 속도 제한으로 해결 예상
* labeling tool 제작 준비
    * csv의 col 제한 강화 및 필요없는 컬러링 기능 제외
    * 왼쪽 레이아웃에 스크롤 사용한 컬러 확인 및 기능 추가
        * 컬러는 이전 사람과 같이 네모 칸에 색깔과 번호 표시

## 진행상황
### Visualizer
* AI 추론 전 클러스터링 과정에서 z 좌표를 미사용하도록 변경
    * 화면 표시에 사용되는 싱글 프레임 클러스터링과 동일하게 구현하여 향후 모델 매칭에 정확성 높이기 위함
    * 추론 결과를 화면에 매칭할 때도 x, y 좌표를 기반하여 매칭하도록 구현이 필요

### Replay
* 우하단 점프 대상 프레임 표시하는 기능에서 프레임 업데이트 되도록 개선
* 슬라이더 이동이 update 호출하고, update가 슬라이더 이동하여 다시 update 이중 호출되는 버그 해결
* 실제 프레임 번호를 메타데이터에 제대로 기록하지 않고 그 다음 번호로 기록하는 버그 해결

### Labeling Tool
* 라벨링 수행할 수 있는 기능을 나열한 레이아웃 작성
    * 버튼 클릭 후 레이블 합치는 기능, 다른 레이블로 변경하여 프레임 너머로 합치는 기능
    * 변경사항 저장하는 기능, 변경사항 취소하여 원상 복원하는 기능
* 글로벌 클러스터링 된 파일만 읽게 제한
* 프레임에 맞게 화면에 버튼 띄우는 기능
    * color_cnt 만큼의 버튼 만든 후, 현 프레임의 클러스터 수만큼 표시
    * 현 프레임의 클러스터 리스트에 해당하는 번호를 표시
    * 클러스터 리스트에 매칭되는 색을 스타일 시트로 표시
        * 버튼의 선택 여부를 알아볼 수 있는 형태의 스타일시트 사용
* 선택한 프레임을 set에 저장하여 관리
    * 프레임 변경시 set 초기화 및 버튼 상태 초기화
* 선택한 클러스터를 확인하기 용이하도록 하이라이트 기능 탑재 [테스트 코드]
    * highlight_test폴더에 기존 replay프로그램 이용하여 기능 구현
    * 점들의 중심좌표에서 원 3개를 하나는 xy평면에, 하나는 xz평면에, 하나는 yz평면에 평행하게 플로팅하여 하이라이트 표시
    * test하며 잘 안 보이는 색, 겹치는 색 다른 색으로 교체 후 color_test.py, color_update.png에 반영
    * labeling tool에 반영 완료
* 변경된 파일 저장 및 기존 파일로 복원기능 구현
* 기능 수행 후 이를 그래픽과 버튼에 반영하는 기능이 필요
    * 메타 데이터 수정은 불필요
* 선택된 클러스터 하이라이팅 기능을 테스트 코드에서 라벨링 툴으로 적용
    * 툴에 맞는 변수로 연결
    * 프레임 업데이트와 별개로 버튼 상태 변화에 따른 호출되는 형식으로 변경

## TODO
* originalDictList 가 아닌 revised 사용하여 프레임 읽도록 변경 필요
* 클러스터 데이터 편집 기능 구현
* change cluster는 몇번째 클러스터를 옮길지도 지정하자