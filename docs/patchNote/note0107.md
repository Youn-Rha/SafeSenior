# 01/07 일지
## 진행률
* 클러스터링의 한계 분석 [완료]
    * 긴 시퀸스 활용 (모델 적용시도 중)
    * 지도 클러스터링 학습
* Visualizer 재구현 [80%]
    * plotting 버그 해결 [완료]
        * 타이머 오버플로우 버그를 확인, 통합 타이머 스케쥴러 구현으로 해결
    * 좌표계 변환 문제 해결 [완료]
        * cartesian, 5 sequence 모델로 AI 변경 및 탑재
    * 센서와 독립적인 클러스터링에 기반한 실제 좌표를 화면에 표시 [60%]
        * 실시간 구현 위한 연산 최적화 및 스레드 재설계
        * 진동하는 위치 안정화 필요
    * 변형된 설계에 적합한 AI 연결 설계 필요 [0%]

* global clustering 결과를 csv 파일에 반영 [완료]
* Replay 기능 구현 [30%]
    * 레이아웃 및 슬라이더 재생 기능 구현 시도 중
        * 실시간 데이터에 대한 캐싱과, 슬라이딩 통한 단방향 재생 가능
    * csv 파일로 부터 재생 가능한 형태로 자료 읽는 기능 구현 필요
* 지도 클러스터링에 필요한 labeling tool 구현 [0%]

## Schedule
* Visualizer
    * stateTransition() 구현, 캐시 테이블에서 가까운 요소에 자세 업데이트
    * 위치 많이 흔들리는 문제는 위치 캐싱과 속도 제한으로 해결 예상
* Replay
    * 타임 슬라이더 기능 구현
    * csv 읽는 기능과 UX에 맞는 레이아웃 재설계

## Replay
* 실시간 replay 프로그램 일시정지/재생 정상화 완료
* 레이아웃 설계
    * csv 파일 선택, cfg 파일 선택, 정보 표시 기능을 왼쪽 레이아웃
        * cfg 파일은 센서의 위치와 프레임 사이의 시간 간격 알아내기 위함
        * 출력 정보로는 총 프레임 수와, 현재 프레임 번호, 현재 프레임의 포인트 수
    * 리플레이 확인을 위한 중심의 3D plot 위젯
    * 하단의 리플레이 슬라이더 및, 재생 등의 컨트롤 위젯 구성
* INI 파서
    * csv 파일과 cfg 파일의 이름을 ini 파일에 저장하여 빠른 로드 가능하게 함
* cfg 읽기 기능
    * INI 또는 cfg 선택 시 cfg 읽어 boundary box와 sensor positon, frameTime 설정
* csv의 outputDict 변환 기능 구현
    * 총 프레임 수 계산 기능
    * 각 프레임의 포인트 개수와 프레임 번호를 리스트로 저장
* csv에서의 실제 frameNum 표시기능 업데이트
    * replay에서는 0에서 부터 시작하는 가상 frameNum으로 제어
* 공용 타이머 통한 재생 기능 구현
* 재생 속도 제어용 상수 도입
* 좌우 화살표를 단축키로 사용가능
* 처음과 시작으로 이동하는 버튼 및 단축키 구현
* 스페이스로 시작, 정지 제어 구현
* 3D 플로팅 구현하여 재생 및 제어로 연결
* 재생 끝나도 아이콘 변경 안되는 버그 해결결
* 타이머 도는중에 다른 버튼으로 정지 시 정상 작동하게 개선

## Visualizer
* cfg 변경 시 이전에 사용하던 boundaryBox가 남아있는 현상 해결

## csv에 글로벌 클러스터 추가
* 독립적인 파이썬 파일로써 캡쳐된 csv 파일을 replay 가능한 형태인 클러스터 추가하는 프로그램 구현 시도
* 현재 글로벌 클러스터링 과정에서 싱글 프레임에 대한 클러스터링 실패한 부분이 오류를 만들어내고 있음

## MATPLOTLIB REPLAY
* 담당 : 류영교
* plotting이나 labeling 연계 면에서 matplotlib과 pyqtgraph 라이브러리에 대한 비교
    * pyqtgraph는 qtvector 기반이라 고성능 plotting 가능
    * matplotlib는 대중적으로 많이 쓰여 익숙하고 강력한 함수들 사용 가능
    * 따라서 두 라이브러리를 사용한 프로그램을 따로 구현하여 비교하기로 결정
* csv 파일 읽어와서 프레임 별 plotting 기능 구현
    * 슬라이더로 프레임 이동 기능 구현
    * 프레임 검색 기능 구현
    * 재생 기능 구현(Play, Stop 버튼 사용)
* labeling 기능과 연계한다고 봤을 때는 dataframe과 함께 사용되기 쉬운 matplotlib가 좋다고 생각
* NavigationToolbar2QT라이브러리로 다양한 기능 구현
    * 프레임 확대 및 회전 기능
    * 프레임 화면 저장 기능
    * xyz축 변형 기능

## TODO
* 끝까지 도착한 후에, 재생하면 다시 처음부터 재생
* 슬라이더 연계

## MATPLOTLIB REPLAY
* plotting이나 labeling 연계 면에서 matplotlib과 pyqtgraph 라이브러리에 대한 비교
    * pyqtgraph는 qtvector 기반이라 고성능 plotting 가능
    * matplotlib는 대중적으로 많이 쓰여 익숙하고 강력한 함수들 사용 가능
    * 따라서 두 라이브러리를 사용한 프로그램을 따로 구현하여 비교하기로 결정
* csv 파일 읽어와서 프레임 별 plotting 기능 구현
    * 슬라이더로 프레임 이동 기능 구현
    * 프레임 검색 기능 구현
    * 재생 기능 구현(Play, Stop 버튼 사용)
* labeling 기능과 연계한다고 봤을 때는 dataframe과 함께 사용되기 쉬운 matplotlib가 좋다고 생각
* NavigationToolbar2QT라이브러리로 다양한 기능 구현
    * 프레임 확대 및 회전 기능
    * 프레임 화면 저장 기능
    * xyz축 변형 기능
* 잘못된 csv 읽는거 체크
* csv에 클러스터 업데이트 하는 부분 고칠 필요
    * 클러스터 없는 프레임을 스킵하도록 개선이 필요
* jump 시에 인덱스 체크 및 경고창 띄우기
* 리플레이에서서 글로벌 클러스터 여부에 따른 색칠
* 글로벌 클러스터링 : 연속된 프레임, 2개 이상이면 연속체만 글로벌 클러스터, 거기서 쓴 클러스터 번호는 기억해놨다가 증가시키면서 계속 쓰자